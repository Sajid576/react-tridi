{"ast":null,"code":"import React, { useRef, useEffect, forwardRef, useState, useCallback, useImperativeHandle, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Animated from 'animated/lib/targets/react-dom';\nimport Hammer from 'hammerjs';\nvar styles = {\n  \"tridi-viewer\": \"_lqEjs\",\n  \"tridi-draggable-true\": \"_2kfM8\",\n  \"tridi-recording-true\": \"_f-Ry5\",\n  \"tridi-viewer-image\": \"_2VqNg\",\n  \"tridi-viewer-image-shown\": \"_3zqPm\",\n  \"tridi-viewer-image-hidden\": \"_1WW7u\",\n  \"tridi-hint-overlay\": \"_3Ohj5\",\n  \"tridi-hint\": \"_1Wsta\",\n  \"tridi-hint-text\": \"_14UgB\",\n  \"tridi-loading\": \"_JdKYk\",\n  \"load8\": \"_IpOvS\",\n  \"fadeIn\": \"_3uImN\"\n};\nfunction useInterval(callback, delay) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n  var savedCallback = useRef();\n  useEffect(function () {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(function () {\n    function tick() {\n      savedCallback.current.apply(savedCallback, args);\n    }\n    if (delay !== null && delay !== undefined) {\n      var id = setInterval(tick, delay);\n      return function () {\n        return clearInterval(id);\n      };\n    }\n  }, [delay]);\n}\nfunction useTridiKeyPressHandler(_ref) {\n  var nextMove = _ref.nextMove,\n    prevMove = _ref.prevMove;\n  var refPrevMove = useRef();\n  var refNextMove = useRef();\n  useEffect(function () {\n    refPrevMove.current = prevMove;\n    refNextMove.current = nextMove;\n  }, [nextMove, prevMove]);\n  function downHandler(_ref2) {}\n  var upHandler = function upHandler(_ref3) {\n    var key = _ref3.key;\n    var keyEventConfig = {\n      ArrowLeft: refPrevMove,\n      ArrowRight: refNextMove\n    };\n    var keyEventHandler = keyEventConfig[key];\n    if (keyEventHandler) {\n      keyEventHandler.current();\n    }\n  };\n  useEffect(function () {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n    return function () {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  }, []);\n}\nvar styles$1 = {\n  \"tridi-control-bar\": \"_3jUN-\",\n  \"tridi-control-button\": \"_gReMg\"\n};\nvar TargetIcon = function TargetIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.526 13.2a9.605 9.605 0 0 1-8.326 8.326V24h-2.4v-2.474A9.605 9.605 0 0 1 2.474 13.2H0v-2.4h2.474A9.605 9.605 0 0 1 10.8 2.474V0h2.4v2.474a9.605 9.605 0 0 1 8.326 8.326H24v2.4h-2.474ZM12 19.2a7.2 7.2 0 1 0 0-14.4 7.2 7.2 0 0 0 0 14.4Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"4\",\n    stroke: \"#212121\",\n    strokeWidth: \"2\"\n  }));\n};\nTargetIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar StopIcon = function StopIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0Zm0 21.964c-5.502 0-9.964-4.462-9.964-9.964 0-5.502 4.462-9.964 9.964-9.964 5.502 0 9.964 4.462 9.964 9.964 0 5.502-4.462 9.964-9.964 9.964Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.556 8.73v6.826H8.73V8.73h6.827Zm.015-1.745H8.714a1.73 1.73 0 0 0-1.729 1.73v6.856a1.73 1.73 0 0 0 1.73 1.73h6.856a1.73 1.73 0 0 0 1.73-1.73V8.714a1.73 1.73 0 0 0-1.73-1.729Z\",\n    fill: \"#212121\",\n    stroke: \"#212121\",\n    strokeWidth: \".03\"\n  }));\n};\nStopIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar NextIcon = function NextIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m16.144 11.826-6.59-4.768a.214.214 0 0 0-.34.174v1.256c0 .274.132.533.354.694L13.463 12l-3.895 2.818a.854.854 0 0 0-.354.694v1.256c0 .174.198.276.34.174l6.59-4.768a.216.216 0 0 0 0-.348Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0Zm0 21.964c-5.502 0-9.964-4.462-9.964-9.964 0-5.502 4.462-9.964 9.964-9.964 5.502 0 9.964 4.462 9.964 9.964 0 5.502-4.462 9.964-9.964 9.964Z\",\n    fill: \"#212121\"\n  }));\n};\nNextIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar PauseIcon = function PauseIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0Zm0 21.964c-5.502 0-9.964-4.462-9.964-9.964 0-5.502 4.462-9.964 9.964-9.964 5.502 0 9.964 4.462 9.964 9.964 0 5.502-4.462 9.964-9.964 9.964ZM9.643 7.714H8.357a.215.215 0 0 0-.214.215v8.142c0 .118.096.215.214.215h1.286a.215.215 0 0 0 .214-.215V7.93a.215.215 0 0 0-.214-.215Zm6 0h-1.286a.215.215 0 0 0-.214.215v8.142c0 .118.096.215.214.215h1.286a.215.215 0 0 0 .214-.215V7.93a.215.215 0 0 0-.214-.215Z\",\n    fill: \"#212121\"\n  }));\n};\nPauseIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar PlayIcon = function PlayIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0Zm0 21.964c-5.502 0-9.964-4.462-9.964-9.964 0-5.502 4.462-9.964 9.964-9.964 5.502 0 9.964 4.462 9.964 9.964 0 5.502-4.462 9.964-9.964 9.964Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m17.555 11.655-7.93-5.76a.426.426 0 0 0-.679.346V17.76c0 .35.397.55.678.346l7.931-5.76a.426.426 0 0 0 0-.69Zm-6.9 3.589V8.756L15.121 12l-4.466 3.244Z\",\n    fill: \"#212121\"\n  }));\n};\nPlayIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar ZoomInIcon = function ZoomInIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.649 9.985h-3.445V6.074a.234.234 0 0 0-.234-.234H10.22a.234.234 0 0 0-.234.234v3.911H6.541a.234.234 0 0 0-.234.234v1.751c0 .129.105.234.234.234h3.444v3.912c0 .128.106.233.234.233h1.751a.234.234 0 0 0 .234-.233v-3.912h3.444a.234.234 0 0 0 .234-.234V10.22a.234.234 0 0 0-.233-.234Zm8.29 12.377-4.262-4.261c3.564-4.347 3.316-10.787-.76-14.859-4.32-4.323-11.337-4.323-15.675 0-4.323 4.338-4.323 11.356 0 15.676 4.072 4.075 10.512 4.323 14.858.759l4.262 4.262c.094.081.243.081.322 0l1.255-1.256c.081-.078.081-.227 0-.32Zm-6.568-4.991a8.878 8.878 0 0 1-12.552 0 8.878 8.878 0 0 1 0-12.552 8.878 8.878 0 0 1 12.552 0 8.878 8.878 0 0 1 0 12.552Z\",\n    fill: \"#212121\"\n  }));\n};\nZoomInIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar ZoomOutIcon = function ZoomOutIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.649 9.985H6.54a.234.234 0 0 0-.234.234v1.751c0 .129.105.234.234.234h9.107a.234.234 0 0 0 .234-.234V10.22a.234.234 0 0 0-.233-.234Zm8.29 12.377-4.262-4.261c3.564-4.347 3.316-10.787-.76-14.859-4.32-4.323-11.337-4.323-15.675 0-4.323 4.338-4.323 11.356 0 15.676 4.072 4.075 10.512 4.323 14.858.759l4.262 4.262c.094.081.243.081.322 0l1.255-1.256c.081-.078.081-.227 0-.32Zm-6.568-4.991a8.878 8.878 0 0 1-12.552 0 8.878 8.878 0 0 1 0-12.552 8.878 8.878 0 0 1 12.552 0 8.878 8.878 0 0 1 0 12.552Z\",\n    fill: \"#212121\"\n  }));\n};\nZoomOutIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar MoveIcon = function MoveIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m23.92 11.83-3.828-3.02a.217.217 0 0 0-.351.17v1.942h-6.66v-6.66h1.944c.18 0 .282-.21.171-.351L12.172.083a.215.215 0 0 0-.339 0L8.81 3.911a.217.217 0 0 0 .17.351h1.941v6.66h-6.66V8.978c0-.18-.21-.282-.35-.171L.083 11.83a.214.214 0 0 0 0 .338l3.825 3.024a.217.217 0 0 0 .35-.17V13.08h6.66v6.66H8.975c-.18 0-.282.21-.171.351l3.023 3.825c.087.11.255.11.34 0l3.023-3.825a.217.217 0 0 0-.171-.351h-1.938v-6.66h6.66v1.944c0 .18.21.282.35.171l3.825-3.024a.22.22 0 0 0 .003-.341Z\",\n    fill: \"#212121\"\n  }));\n};\nMoveIcon.defaultProps = {\n  width: \"24\",\n  height: \"24\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar ControlBar = function ControlBar(_ref) {\n  var isPlaying = _ref.isPlaying,\n    isRecording = _ref.isRecording,\n    isMoveing = _ref.isMoveing,\n    setIsPlaying = _ref.setIsPlaying,\n    setIsRecording = _ref.setIsRecording,\n    onPlay = _ref.onPlay,\n    onPause = _ref.onPause,\n    onNext = _ref.onNext,\n    onPrev = _ref.onPrev,\n    onRecordStart = _ref.onRecordStart,\n    onRecordStop = _ref.onRecordStop,\n    onZoomout = _ref.onZoomout,\n    onZoomin = _ref.onZoomin,\n    onStartMoveing = _ref.onStartMoveing,\n    onStopMoveing = _ref.onStopMoveing,\n    hideRecord = _ref.hideRecord;\n  var playHandler = function playHandler() {\n    setIsPlaying(true);\n    onPlay();\n  };\n  var pauseHandler = function pauseHandler() {\n    setIsPlaying(false);\n    onPause();\n  };\n  var recordStartHandler = function recordStartHandler() {\n    setIsRecording(true);\n    onRecordStart();\n  };\n  var recordStopHandler = function recordStopHandler() {\n    setIsRecording(false);\n    onRecordStop();\n  };\n  var moveStartHandler = function moveStartHandler() {\n    onStartMoveing();\n  };\n  var moveStopHandler = function moveStopHandler() {\n    onStopMoveing();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tridi-control-bar \" + styles$1['tridi-control-bar'],\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, !hideRecord && !isRecording && /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: recordStartHandler\n  }, /*#__PURE__*/React.createElement(TargetIcon, null)), !hideRecord && isRecording && /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: recordStopHandler\n  }, /*#__PURE__*/React.createElement(StopIcon, null)), !isPlaying && /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: playHandler\n  }, /*#__PURE__*/React.createElement(PlayIcon, null)), isPlaying && /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: pauseHandler\n  }, /*#__PURE__*/React.createElement(PauseIcon, null)), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    style: {\n      transform: 'rotate(180deg)'\n    },\n    onClick: onPrev\n  }, /*#__PURE__*/React.createElement(NextIcon, null)), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: onNext\n  }, /*#__PURE__*/React.createElement(NextIcon, null)), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: onZoomout\n  }, /*#__PURE__*/React.createElement(ZoomOutIcon, null)), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: onZoomin\n  }, /*#__PURE__*/React.createElement(ZoomInIcon, null)), !isMoveing && /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: moveStartHandler\n  }, /*#__PURE__*/React.createElement(MoveIcon, null)), isMoveing && /*#__PURE__*/React.createElement(\"a\", {\n    className: \"\" + styles$1['tridi-control-button'],\n    onClick: moveStopHandler\n  }, /*#__PURE__*/React.createElement(StopIcon, null)));\n};\nvar styles$2 = {\n  \"tridi-dot\": \"_1TrFD\",\n  \"tridi-pin\": \"_1QXU8\"\n};\nvar Pins = function Pins(_ref) {\n  var pins = _ref.pins,\n    viewerWidth = _ref.viewerWidth,\n    viewerHeight = _ref.viewerHeight,\n    currentFrameId = _ref.currentFrameId,\n    pinWidth = _ref.pinWidth,\n    pinHeight = _ref.pinHeight,\n    renderPin = _ref.renderPin,\n    onPinDoubleClick = _ref.onPinDoubleClick,\n    onPinClick = _ref.onPinClick;\n  var getPosition = function getPosition(pin) {\n    if (viewerWidth >= 0 && viewerHeight >= 0) {\n      return {\n        left: (pin.x * 100).toFixed(3) + '%',\n        marginTop: \"-\" + pinHeight / 2 + \"px\",\n        marginLeft: \"-\" + pinWidth / 2 + \"px\",\n        top: (pin.y * 100).toFixed(3) + '%'\n      };\n    }\n    return {\n      display: 'none'\n    };\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tridi-dots-wrapper\"\n  }, (pins === null || pins === void 0 ? void 0 : pins.length) > 0 && pins.filter(function (pin) {\n    return pin.frameId === currentFrameId;\n  }).map(function (pin, index) {\n    return renderPin ? /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"tridi-pin \" + styles$2['tridi-pin'],\n      style: getPosition(pin),\n      onDoubleClick: function onDoubleClick(e) {\n        e.stopPropagation();\n        onPinDoubleClick(pin);\n      },\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        onPinClick(pin);\n      }\n    }, renderPin(pin)) : /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"tridi-dot \" + styles$2['tridi-dot'],\n      style: getPosition(pin),\n      onDoubleClick: function onDoubleClick(e) {\n        e.stopPropagation();\n        onPinDoubleClick(pin);\n      },\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        onPinClick(pin);\n      }\n    });\n  }));\n};\nPins.defaultProps = {\n  pins: [],\n  pinWidth: 10,\n  pinHeight: 10,\n  onDoubleClick: function onDoubleClick() {},\n  onPinClick: function onPinClick() {}\n};\nvar styles$3 = {\n  \"tridi-status-bar\": \"_2_pZm\"\n};\nvar StatusBar = function StatusBar(_ref) {\n  var isRecording = _ref.isRecording,\n    currentImageIndex = _ref.currentImageIndex;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tridi-status-bar \" + styles$3['tridi-status-bar']\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"status-info\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"info-label\"\n  }, \"Frame Id: \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"info-value\"\n  }, currentImageIndex)), isRecording && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"status-info\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"info-label\"\n  }, \"Recording...\")));\n};\nvar DragIcon = function DragIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", props, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31.37 3.216h-9.652a.805.805 0 0 0 0 1.61h9.653a.805.805 0 0 0 0-1.61Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31.94 3.453 28.724.235a.805.805 0 0 0-1.137 1.138l2.648 2.648-2.65 2.65a.805.805 0 0 0 1.139 1.137L31.94 4.59a.805.805 0 0 0 0-1.137ZM10.457 3.216H.805a.805.805 0 0 0 0 1.61h9.652a.805.805 0 0 0 0-1.61Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.942 4.02 4.59 1.374A.805.805 0 0 0 3.453.235L.235 3.453a.805.805 0 0 0 0 1.137l3.218 3.218a.808.808 0 0 0 1.137-.002.805.805 0 0 0 0-1.137L1.942 4.02Z\",\n    fill: \"#212121\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.942 4.02 4.59 1.374A.805.805 0 0 0 3.453.235L.235 3.453a.805.805 0 0 0 0 1.137l3.218 3.218a.808.808 0 0 0 1.137-.002.805.805 0 0 0 0-1.137L1.942 4.02ZM27.419 10.056c-.491.099-.92.34-1.248.67a2.443 2.443 0 0 0-2.576-1.147c-.491.098-.919.34-1.248.67a2.443 2.443 0 0 0-2.576-1.147c-.435.087-.82.286-1.13.56l-.782-3.906a2.44 2.44 0 0 0-2.869-1.911 2.44 2.44 0 0 0-1.911 2.868l2.033 10.157-2.388-1.141a3.195 3.195 0 0 0-4.016 1.104 1.83 1.83 0 0 0 .508 2.535l10.212 6.806a5.45 5.45 0 0 0 4.119.814l2.8-.561a6.71 6.71 0 0 0 5.256-7.888l-1.316-6.572a2.44 2.44 0 0 0-2.868-1.91Zm2.989 8.723a5.49 5.49 0 0 1-4.3 6.453l-2.8.56a4.238 4.238 0 0 1-3.204-.632L9.891 18.354a.61.61 0 0 1-.169-.845 1.966 1.966 0 0 1 1.25-.832c.405-.08.836-.037 1.228.15l3.486 1.668a.611.611 0 0 0 .86-.67L14.275 6.474a1.22 1.22 0 0 1 2.39-.478l1.794 8.961a.61.61 0 0 0 1.195-.239l-.598-2.987a1.22 1.22 0 0 1 2.39-.479l.597 2.987A.61.61 0 0 0 23.237 14l-.358-1.792a1.22 1.22 0 0 1 2.39-.479l.358 1.793a.61.61 0 0 0 1.195-.24l-.12-.597a1.22 1.22 0 0 1 .956-1.434 1.22 1.22 0 0 1 1.434.956l1.316 6.572Z\",\n    fill: \"#212121\"\n  }));\n};\nDragIcon.defaultProps = {\n  width: \"33\",\n  height: \"30\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar AnimatedDiv = Animated.div;\nvar TridiUtils = function TridiUtils() {};\nTridiUtils.isValidProps = function (_ref2) {\n  var images = _ref2.images,\n    format = _ref2.format,\n    location = _ref2.location;\n  var isValid = true;\n  if (!images && !format) {\n    console.error(\"'format' property is missing or invalid. Image format must be provided for 'numbered' property.\");\n    isValid = false;\n  }\n  if (images === 'numbered' && !location) {\n    console.error(\"'location' property is missing or invalid. Image location must be provided for 'numbered' property.\");\n    isValid = false;\n  }\n  return isValid;\n};\nTridiUtils.normalizedImages = function (images, format, location, count) {\n  if (images === 'numbered') {\n    return Array.apply(null, {\n      length: count\n    }).map(function (_a, index) {\n      return location + \"/\" + (index + 1) + \".\" + format.toLowerCase();\n    });\n  }\n  return images;\n};\nTridiUtils.uid = function () {\n  return Date.now().toString(36) + Math.random().toString(36).substr(2);\n};\nvar Tridi = forwardRef(function (_ref, ref) {\n  var className = _ref.className,\n    images = _ref.images,\n    pins = _ref.pins,\n    pinWidth = _ref.pinWidth,\n    pinHeight = _ref.pinHeight,\n    setPins = _ref.setPins,\n    format = _ref.format,\n    location = _ref.location,\n    count = _ref.count,\n    draggable = _ref.draggable,\n    hintOnStartup = _ref.hintOnStartup,\n    hintText = _ref.hintText,\n    autoplay = _ref.autoplay,\n    autoplaySpeed = _ref.autoplaySpeed,\n    stopAutoplayOnClick = _ref.stopAutoplayOnClick,\n    stopAutoplayOnMouseEnter = _ref.stopAutoplayOnMouseEnter,\n    resumeAutoplayOnMouseLeave = _ref.resumeAutoplayOnMouseLeave,\n    touch = _ref.touch,\n    mousewheel = _ref.mousewheel,\n    inverse = _ref.inverse,\n    dragInterval = _ref.dragInterval,\n    touchDragInterval = _ref.touchDragInterval,\n    mouseleaveDetect = _ref.mouseleaveDetect,\n    showControlBar = _ref.showControlBar,\n    showStatusBar = _ref.showStatusBar,\n    renderPin = _ref.renderPin,\n    renderHint = _ref.renderHint,\n    zoom = _ref.zoom,\n    onHintHide = _ref.onHintHide,\n    onAutoplayStart = _ref.onAutoplayStart,\n    onAutoplayStop = _ref.onAutoplayStop,\n    onNextMove = _ref.onNextMove,\n    onPrevMove = _ref.onPrevMove,\n    onNextFrame = _ref.onNextFrame,\n    onPrevFrame = _ref.onPrevFrame,\n    onDragStart = _ref.onDragStart,\n    onDragEnd = _ref.onDragEnd,\n    onFrameChange = _ref.onFrameChange,\n    onRecordStart = _ref.onRecordStart,\n    onRecordStop = _ref.onRecordStop,\n    onPinClick = _ref.onPinClick,\n    onZoom = _ref.onZoom,\n    maxZoom = _ref.maxZoom,\n    minZoom = _ref.minZoom,\n    hideRecord = _ref.hideRecord,\n    onLoadChange = _ref.onLoadChange;\n  var _useState = useState([]),\n    moveBuffer = _useState[0],\n    setMoveBuffer = _useState[1];\n  var _useState2 = useState(hintOnStartup),\n    hintVisible = _useState2[0],\n    setHintVisible = _useState2[1];\n  var _useState3 = useState(0),\n    currentImageIndex = _useState3[0],\n    setCurrentImageIndex = _useState3[1];\n  var _useState4 = useState(false),\n    isDragging = _useState4[0],\n    setIsDragging = _useState4[1];\n  var _useState5 = useState(false),\n    isAutoPlayRunning = _useState5[0],\n    setIsAutoPlayRunning = _useState5[1];\n  var _useState6 = useState(false),\n    isRecording = _useState6[0],\n    setIsRecording = _useState6[1];\n  var _useState7 = useState(null),\n    recordingSessionId = _useState7[0],\n    setRecordingSessionId = _useState7[1];\n  var _useState8 = useState(false),\n    isPlaying = _useState8[0],\n    setIsPlaying = _useState8[1];\n  var _useState9 = useState(false),\n    isMoveing = _useState9[0],\n    setIsMoveing = _useState9[1];\n  var AnimatedValues = useRef({\n    x: new Animated.Value(0),\n    y: new Animated.Value(0),\n    zoom: new Animated.Value(zoom),\n    originZoom: 1,\n    originOffset: null,\n    isZooming: false\n  });\n  var _useState10 = useState(null),\n    viewerSize = _useState10[0],\n    setViewerSize = _useState10[1];\n  var _count = Array.isArray(images) ? images.length : Number(count);\n  var _images = TridiUtils.normalizedImages(images, format, location, _count);\n  var _viewerImageRef = useRef(null);\n  var _viewerZoomRef = useRef(null);\n  var _draggable = !isRecording && draggable;\n  var _useState11 = useState(0),\n    loadedImagesCount = _useState11[0],\n    setLoadedImagesCount = _useState11[1];\n  var hideHint = function hideHint() {\n    setHintVisible(false);\n    onHintHide();\n  };\n  var nextFrame = useCallback(function () {\n    var newIndex = currentImageIndex >= _count - 1 ? 0 : currentImageIndex + 1;\n    setCurrentImageIndex(newIndex);\n    onNextFrame();\n    onFrameChange(newIndex);\n  }, [_count, currentImageIndex, onFrameChange, onNextFrame]);\n  var prevFrame = useCallback(function () {\n    var newIndex = currentImageIndex <= 0 ? _count - 1 : currentImageIndex - 1;\n    setCurrentImageIndex(newIndex);\n    onPrevFrame();\n    onFrameChange(newIndex);\n  }, [_count, currentImageIndex, onFrameChange, onPrevFrame]);\n  var nextMove = useCallback(function () {\n    onNextMove();\n    return inverse ? prevFrame() : nextFrame();\n  }, [inverse, nextFrame, onNextMove, prevFrame]);\n  var prevMove = useCallback(function () {\n    onPrevMove();\n    return inverse ? nextFrame() : prevFrame();\n  }, [inverse, nextFrame, onPrevMove, prevFrame]);\n  var rotateViewerImage = useCallback(function (e) {\n    var interval = e.touches ? touchDragInterval : dragInterval;\n    var eventX = e.touches ? Math.round(e.touches[0].clientX) : e.clientX;\n    var coord = eventX - _viewerImageRef.current.offsetLeft;\n    var newMoveBufffer = moveBuffer;\n    if (moveBuffer.length < 2) {\n      newMoveBufffer = moveBuffer.concat(coord);\n    } else {\n      newMoveBufffer = [moveBuffer[1], coord];\n    }\n    setMoveBuffer(newMoveBufffer);\n    var threshold = !(coord % interval);\n    var oldMove = newMoveBufffer[0];\n    var newMove = newMoveBufffer[1];\n    if (threshold && newMove < oldMove) {\n      nextMove();\n    } else if (threshold && newMove > oldMove) {\n      prevMove();\n    }\n  }, [dragInterval, moveBuffer, nextMove, prevMove, touchDragInterval]);\n  var resetMoveBuffer = function resetMoveBuffer() {\n    return setMoveBuffer([]);\n  };\n  var startDragging = useCallback(function () {\n    setIsDragging(true);\n    onDragStart();\n  }, [onDragStart]);\n  var stopDragging = useCallback(function () {\n    setIsDragging(false);\n    onDragEnd();\n  }, [onDragEnd]);\n  var _toggleAutoplay = useCallback(function (state) {\n    setIsAutoPlayRunning(state);\n    return state ? onAutoplayStart() : onAutoplayStop();\n  }, [onAutoplayStart, onAutoplayStop]);\n  var _toggleRecording = useCallback(function (state, existingSessionId) {\n    setIsRecording(state);\n    var sessionId = recordingSessionId || existingSessionId || TridiUtils.uid();\n    if (state) {\n      if (!recordingSessionId) {\n        setRecordingSessionId(sessionId);\n      }\n      onRecordStart(sessionId);\n    } else {\n      setRecordingSessionId(null);\n      onRecordStop(sessionId);\n    }\n  }, [onRecordStart, onRecordStop, recordingSessionId]);\n  var resetPosition = useCallback(function () {\n    console.log('resetPosition');\n    AnimatedValues.current.x.setValue(0);\n    AnimatedValues.current.y.setValue(0);\n    AnimatedValues.current.zoom.setValue(zoom);\n  }, []);\n  var _toggleMoving = useCallback(function (isMoving) {\n    if (isMoving) {\n      _toggleRecording(false);\n      setIsMoveing(true);\n    } else {\n      resetPosition();\n      setIsMoveing(false);\n    }\n  }, [resetPosition, _toggleRecording]);\n  var setZoom = function setZoom(zoom) {\n    var newZoom = Math.max(minZoom, zoom);\n    newZoom = Math.min(maxZoom, newZoom);\n    AnimatedValues.current.zoom.setValue(newZoom);\n    onZoom(newZoom);\n  };\n  var imageViewerMouseDownHandler = function imageViewerMouseDownHandler(e) {\n    if (_draggable) {\n      if (e.preventDefault) e.preventDefault();\n      startDragging();\n      rotateViewerImage(e);\n    }\n    if (isMoveing) {\n      var clientX = e.clientX;\n      var clientY = e.clientY;\n      AnimatedValues.current.originOffset = {\n        x: clientX - AnimatedValues.current.x._value,\n        y: clientY - AnimatedValues.current.y._value\n      };\n    }\n    if (isAutoPlayRunning && stopAutoplayOnClick) {\n      _toggleAutoplay(false);\n    }\n  };\n  var imageViewerMouseUpHandler = function imageViewerMouseUpHandler(e) {\n    if (_draggable) {\n      if (e.preventDefault) e.preventDefault();\n      stopDragging();\n      resetMoveBuffer();\n    }\n    AnimatedValues.current.originOffset = null;\n  };\n  var imageViewerMouseMoveHandler = function imageViewerMouseMoveHandler(e) {\n    if (isDragging && isMoveing && AnimatedValues.current.originOffset) {\n      var clientX = e.clientX;\n      var clientY = e.clientY;\n      AnimatedValues.current.x.setValue(clientX - AnimatedValues.current.originOffset.x);\n      AnimatedValues.current.y.setValue(clientY - AnimatedValues.current.originOffset.y);\n      return;\n    }\n    if (_draggable && isDragging) {\n      rotateViewerImage(e);\n    }\n  };\n  var imageViewerMouseLeaveHandler = function imageViewerMouseLeaveHandler() {\n    if (_draggable) resetMoveBuffer();\n    if (!isAutoPlayRunning && resumeAutoplayOnMouseLeave) {\n      _toggleAutoplay(true);\n    }\n    if (mouseleaveDetect) {\n      stopDragging();\n      resetMoveBuffer();\n    }\n  };\n  var imageViewerMouseEnterHandler = function imageViewerMouseEnterHandler() {\n    if (isAutoPlayRunning && stopAutoplayOnMouseEnter) {\n      _toggleAutoplay(false);\n    }\n  };\n  var imageViewerWheelHandler = useCallback(function (e) {\n    if (mousewheel) {\n      if (e.preventDefault) e.preventDefault();\n      e.deltaY / 120 > 0 ? nextMove() : prevMove();\n    }\n  }, [mousewheel, nextMove, prevMove]);\n  var imageViewerTouchStartHandler = useCallback(function (e) {\n    if (isMoveing) {\n      var clientX = e.touches[0].clientX;\n      var clientY = e.touches[0].clientY;\n      AnimatedValues.current.originOffset = {\n        x: clientX - AnimatedValues.current.x._value,\n        y: clientY - AnimatedValues.current.y._value\n      };\n      return;\n    }\n    if (touch) {\n      startDragging();\n      rotateViewerImage(e);\n    }\n    if (isAutoPlayRunning && stopAutoplayOnClick) {\n      _toggleAutoplay(false);\n    }\n  }, [isAutoPlayRunning, rotateViewerImage, startDragging, stopAutoplayOnClick, _toggleAutoplay, touch, isMoveing]);\n  var imageViewerTouchMoveHandler = useCallback(function (e) {\n    if (AnimatedValues.current.isZooming) {\n      return;\n    }\n    if (isMoveing && AnimatedValues.current.originOffset) {\n      var clientX = e.touches[0].clientX;\n      var clientY = e.touches[0].clientY;\n      AnimatedValues.current.x.setValue(clientX - AnimatedValues.current.originOffset.x);\n      AnimatedValues.current.y.setValue(clientY - AnimatedValues.current.originOffset.y);\n      return;\n    }\n    if (touch) {\n      rotateViewerImage(e);\n    }\n  }, [rotateViewerImage, touch, isMoveing]);\n  var imageViewerTouchEndHandler = useCallback(function (e) {\n    AnimatedValues.current.originOffset = null;\n    if (touch) {\n      stopDragging();\n      resetMoveBuffer();\n    }\n    if (!isAutoPlayRunning && resumeAutoplayOnMouseLeave) {\n      _toggleAutoplay(true);\n    }\n  }, [isAutoPlayRunning, resumeAutoplayOnMouseLeave, stopDragging, _toggleAutoplay, touch]);\n  var imageViewerClickHandler = function imageViewerClickHandler(e) {\n    if (isRecording) {\n      var viewerWidth = _viewerImageRef.current.clientWidth;\n      var viewerHeight = _viewerImageRef.current.clientHeight;\n      var clientX = (e.clientX - AnimatedValues.current.x._value - (viewerWidth - viewerWidth * AnimatedValues.current.zoom._value) / 2) / AnimatedValues.current.zoom._value;\n      var clientY = (e.clientY - AnimatedValues.current.y._value - (viewerHeight - viewerHeight * AnimatedValues.current.zoom._value) / 2) / AnimatedValues.current.zoom._value;\n      var viewerOffsetLeft = _viewerImageRef.current.getBoundingClientRect().left;\n      var viewerOffsetTop = _viewerImageRef.current.getBoundingClientRect().top;\n      var x = ((clientX - viewerOffsetLeft) / viewerWidth).toFixed(6);\n      var y = ((clientY - viewerOffsetTop) / viewerHeight).toFixed(6);\n      var pin = {\n        id: TridiUtils.uid(),\n        frameId: currentImageIndex,\n        x: x,\n        y: y,\n        recordingSessionId: recordingSessionId\n      };\n      var newPins = pins.concat(pin);\n      setPins(newPins);\n    }\n  };\n  var pinDoubleClickHandler = function pinDoubleClickHandler(pin) {\n    if (isRecording) {\n      var newPins = pins.filter(function (item) {\n        return item.id !== pin.id;\n      });\n      setPins(newPins);\n    }\n  };\n  var pinClickHandler = function pinClickHandler(pin) {\n    if (!isRecording) {\n      onPinClick(pin);\n    }\n  };\n  useEffect(function () {\n    var viewerRef = _viewerImageRef.current;\n    viewerRef.addEventListener('touchstart', imageViewerTouchStartHandler, {\n      passive: false\n    });\n    viewerRef.addEventListener('touchmove', imageViewerTouchMoveHandler, {\n      passive: false\n    });\n    viewerRef.addEventListener('touchend', imageViewerTouchEndHandler, {\n      passive: false\n    });\n    viewerRef.addEventListener('wheel', imageViewerWheelHandler, {\n      passive: false\n    });\n    return function () {\n      viewerRef.removeEventListener('touchstart', imageViewerTouchStartHandler);\n      viewerRef.removeEventListener('touchmove', imageViewerTouchMoveHandler);\n      viewerRef.removeEventListener('touchend', imageViewerTouchEndHandler);\n      viewerRef.removeEventListener('wheel', imageViewerWheelHandler);\n    };\n  }, [imageViewerTouchEndHandler, imageViewerTouchMoveHandler, imageViewerTouchStartHandler, imageViewerWheelHandler]);\n  useEffect(function () {\n    if (autoplay) {\n      _toggleAutoplay(autoplay);\n    }\n  }, [autoplay, _toggleAutoplay]);\n  useInterval(function () {\n    nextMove();\n  }, isAutoPlayRunning ? autoplaySpeed : null);\n  useEffect(function () {\n    if (zoom !== undefined && zoom !== AnimatedValues.current.zoom._value) {\n      var newZoom = Math.max(minZoom, zoom);\n      newZoom = Math.min(maxZoom, newZoom);\n      AnimatedValues.current.zoom.setValue(newZoom);\n      onZoom(newZoom);\n    }\n  }, [zoom, onZoom]);\n  useImperativeHandle(ref, function () {\n    return {\n      setZoom: setZoom,\n      toggleRecording: function toggleRecording(state, recordingSessionId) {\n        return _toggleRecording(state, recordingSessionId);\n      },\n      toggleAutoplay: function toggleAutoplay(state) {\n        return _toggleAutoplay(state);\n      },\n      toggleMoving: function toggleMoving(isMoving) {\n        return _toggleMoving(isMoving);\n      },\n      next: function next() {\n        return nextMove();\n      },\n      prev: function prev() {\n        return prevMove();\n      }\n    };\n  });\n  var loadImage = function loadImage() {\n    setLoadedImagesCount(loadedImagesCount + 1);\n    onImageLoaded();\n    if (!viewerSize) {\n      var _viewerImageRef$curre, _viewerImageRef$curre2;\n      setViewerSize({\n        width: _viewerImageRef === null || _viewerImageRef === void 0 ? void 0 : (_viewerImageRef$curre = _viewerImageRef.current) === null || _viewerImageRef$curre === void 0 ? void 0 : _viewerImageRef$curre.clientWidth,\n        height: _viewerImageRef === null || _viewerImageRef === void 0 ? void 0 : (_viewerImageRef$curre2 = _viewerImageRef.current) === null || _viewerImageRef$curre2 === void 0 ? void 0 : _viewerImageRef$curre2.clientHeight\n      });\n    }\n  };\n  var onImageLoaded = useCallback(function () {\n    onLoadChange(loadedImagesCount + 1 === _count, Math.round((loadedImagesCount + 1) / _count * 100));\n  }, [_count, loadedImagesCount, onLoadChange]);\n  useTridiKeyPressHandler({\n    nextMove: nextMove,\n    prevMove: prevMove\n  });\n  var renderImages = function renderImages() {\n    return _images.map(function (src, index) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        key: index,\n        src: src,\n        onLoad: loadImage,\n        className: styles['tridi-viewer-image'] + \" \" + (currentImageIndex === index ? styles['tridi-viewer-image-shown'] : styles['tridi-viewer-image-hidden']),\n        alt: \"\"\n      });\n    });\n  };\n  var renderHintOverlay = function renderHintOverlay() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\" + styles['tridi-hint-overlay'],\n      onClick: hideHint,\n      onTouchStart: hideHint\n    }, !renderHint && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(DragIcon, null), hintText && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\" + styles['tridi-hint-text']\n    }, hintText)), renderHint && renderHint());\n  };\n  var generateViewerClassName = function generateViewerClassName() {\n    var classNameStr = styles['tridi-viewer'];\n    if (_draggable) classNameStr += ' ' + styles['tridi-draggable-true'];\n    if (isRecording) classNameStr += ' ' + styles['tridi-recording-true'];\n    if (touch) classNameStr += ' ' + styles['tridi-touch-true'];\n    if (mousewheel) classNameStr += ' ' + styles['tridi-mousewheel-true'];\n    if (hintOnStartup) classNameStr += ' ' + styles['tridi-hintOnStartup-true'];\n    if (className) classNameStr += ' ' + className;\n    return classNameStr;\n  };\n  var initHammer = useCallback(function () {\n    var element = document.getElementById('viewerImage');\n    var mc = new Hammer.Manager(element);\n    var pinch = new Hammer.Pinch();\n    mc.add([pinch]);\n    mc.on('pinchstart', function (ev) {\n      AnimatedValues.current.originOffset = {\n        x: ev.center.x - AnimatedValues.current.x._value,\n        y: ev.center.y - AnimatedValues.current.y._value\n      };\n      AnimatedValues.current.originZoom = AnimatedValues.current.zoom._value;\n      AnimatedValues.current.isZooming = true;\n    });\n    mc.on('pinchend', function (ev) {\n      AnimatedValues.current.isZooming = false;\n      AnimatedValues.current.originOffset = null;\n    });\n    mc.on('pinchcancel', function (ev) {\n      AnimatedValues.current.isZooming = false;\n      AnimatedValues.current.originOffset = null;\n    });\n    mc.on('pinch', function (ev) {\n      var scale = AnimatedValues.current.originZoom - 1 + ev.scale;\n      scale = Math.max(minZoom, scale);\n      scale = Math.min(maxZoom, scale);\n      if (scale !== AnimatedValues.current.zoom._value) {\n        AnimatedValues.current.zoom.setValue(scale);\n        onZoom(scale);\n      }\n    });\n  }, [minZoom, maxZoom]);\n  useEffect(function () {\n    initHammer();\n  }, []);\n  if (!TridiUtils.isValidProps({\n    images: images,\n    format: format,\n    location: location\n  })) {\n    console.log('Invalid Settings');\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: generateViewerClassName()\n  }, hintVisible && renderHintOverlay(), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"viewerImage\",\n    ref: _viewerImageRef,\n    onMouseDown: imageViewerMouseDownHandler,\n    onMouseUp: imageViewerMouseUpHandler,\n    onMouseMove: imageViewerMouseMoveHandler,\n    onMouseLeave: imageViewerMouseLeaveHandler,\n    onMouseEnter: imageViewerMouseEnterHandler,\n    onClick: imageViewerClickHandler,\n    style: {\n      width: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(AnimatedDiv, {\n    ref: _viewerZoomRef,\n    style: {\n      width: '100%',\n      transform: [{\n        scale: AnimatedValues.current.zoom\n      }, {\n        translateY: AnimatedValues.current.y\n      }, {\n        translateX: AnimatedValues.current.x\n      }]\n    }\n  }, (_images === null || _images === void 0 ? void 0 : _images.length) > 0 && renderImages(), viewerSize ? /*#__PURE__*/React.createElement(Pins, {\n    pins: pins,\n    viewerWidth: viewerSize.width,\n    viewerHeight: viewerSize.height,\n    currentFrameId: currentImageIndex,\n    pinWidth: pinWidth,\n    pinHeight: pinHeight,\n    onPinDoubleClick: pinDoubleClickHandler,\n    onPinClick: pinClickHandler,\n    renderPin: renderPin\n  }) : null)), showStatusBar && /*#__PURE__*/React.createElement(StatusBar, {\n    isRecording: isRecording,\n    currentImageIndex: currentImageIndex\n  }), showControlBar && /*#__PURE__*/React.createElement(ControlBar, {\n    hideRecord: hideRecord,\n    isPlaying: isPlaying,\n    isRecording: isRecording,\n    isMoveing: isMoveing,\n    setIsPlaying: setIsPlaying,\n    setIsRecording: setIsRecording,\n    setIsMoveing: setIsMoveing,\n    onStartMoveing: function onStartMoveing() {\n      return _toggleMoving(true);\n    },\n    onStopMoveing: function onStopMoveing() {\n      return _toggleMoving(false);\n    },\n    onPlay: function onPlay() {\n      return _toggleAutoplay(true);\n    },\n    onPause: function onPause() {\n      return _toggleAutoplay(false);\n    },\n    onNext: function onNext() {\n      return nextMove();\n    },\n    onPrev: function onPrev() {\n      return prevMove();\n    },\n    onRecordStart: function onRecordStart() {\n      _toggleRecording(true);\n      setIsMoveing(false);\n    },\n    onRecordStop: function onRecordStop() {\n      return _toggleRecording(false);\n    },\n    onZoomout: function onZoomout() {\n      setZoom(AnimatedValues.current.zoom._value - 0.1);\n    },\n    onZoomin: function onZoomin() {\n      setZoom(AnimatedValues.current.zoom._value + 0.1);\n    }\n  }));\n});\nTridi.propTypes = {\n  className: PropTypes.string,\n  style: PropTypes.object,\n  images: PropTypes.oneOfType([PropTypes.array, PropTypes.string]),\n  pins: PropTypes.array,\n  pinWidth: PropTypes.number,\n  pinHeight: PropTypes.number,\n  format: PropTypes.string,\n  location: PropTypes.string,\n  count: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  draggable: PropTypes.bool,\n  hintOnStartup: PropTypes.bool,\n  hintText: PropTypes.string,\n  autoplay: PropTypes.bool,\n  autoplaySpeed: PropTypes.number,\n  stopAutoplayOnClick: PropTypes.bool,\n  stopAutoplayOnMouseEnter: PropTypes.bool,\n  resumeAutoplayOnMouseLeave: PropTypes.bool,\n  touch: PropTypes.bool,\n  mousewheel: PropTypes.bool,\n  inverse: PropTypes.bool,\n  dragInterval: PropTypes.number,\n  touchDragInterval: PropTypes.number,\n  mouseleaveDetect: PropTypes.bool,\n  showControlBar: PropTypes.bool,\n  showStatusBar: PropTypes.bool,\n  hideRecord: PropTypes.bool,\n  renderPin: PropTypes.func,\n  setPins: PropTypes.func,\n  renderHint: PropTypes.func,\n  zoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n  minZoom: PropTypes.number,\n  onHintHide: PropTypes.func,\n  onAutoplayStart: PropTypes.func,\n  onAutoplayStop: PropTypes.func,\n  onNextMove: PropTypes.func,\n  onPrevMove: PropTypes.func,\n  onNextFrame: PropTypes.func,\n  onPrevFrame: PropTypes.func,\n  onDragStart: PropTypes.func,\n  onDragEnd: PropTypes.func,\n  onFrameChange: PropTypes.func,\n  onRecordStart: PropTypes.func,\n  onRecordStop: PropTypes.func,\n  onPinClick: PropTypes.func,\n  onLoadChange: PropTypes.func\n};\nTridi.defaultProps = {\n  className: undefined,\n  style: undefined,\n  images: 'numbered',\n  pin: undefined,\n  pinWidth: 10,\n  pinHeight: 10,\n  format: undefined,\n  location: './images',\n  count: undefined,\n  draggable: true,\n  hintOnStartup: false,\n  hintText: null,\n  autoplay: false,\n  autoplaySpeed: 50,\n  stopAutoplayOnClick: false,\n  stopAutoplayOnMouseEnter: false,\n  resumeAutoplayOnMouseLeave: false,\n  touch: true,\n  mousewheel: false,\n  inverse: false,\n  dragInterval: 1,\n  touchDragInterval: 2,\n  mouseleaveDetect: false,\n  showControlBar: false,\n  showStatusBar: false,\n  hideRecord: false,\n  renderPin: undefined,\n  setPins: function setPins() {},\n  renderHint: undefined,\n  zoom: 1,\n  maxZoom: 3,\n  minZoom: 1,\n  onHintHide: function onHintHide() {},\n  onAutoplayStart: function onAutoplayStart() {},\n  onAutoplayStop: function onAutoplayStop() {},\n  onNextMove: function onNextMove() {},\n  onPrevMove: function onPrevMove() {},\n  onNextFrame: function onNextFrame() {},\n  onPrevFrame: function onPrevFrame() {},\n  onDragStart: function onDragStart() {},\n  onDragEnd: function onDragEnd() {},\n  onFrameChange: function onFrameChange() {},\n  onRecordStart: function onRecordStart() {},\n  onRecordStop: function onRecordStop() {},\n  onPinClick: function onPinClick() {},\n  onZoom: function onZoom() {},\n  onLoadChange: function onLoadChange() {}\n};\nexport default Tridi;","map":{"version":3,"mappings":"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","names":["useInterval","callback","delay","args","savedCallback","useRef","useEffect","current","tick","undefined","id","setInterval","clearInterval","useTridiKeyPressHandler","nextMove","prevMove","refPrevMove","refNextMove","downHandler","upHandler","key","keyEventConfig","ArrowLeft","ArrowRight","keyEventHandler","window","addEventListener","removeEventListener","TargetIcon","StopIcon","NextIcon","PauseIcon","PlayIcon","ZoomInIcon","ZoomOutIcon","MoveIcon","ControlBar","isPlaying","isRecording","isMoveing","setIsPlaying","setIsRecording","onPlay","onPause","onNext","onPrev","onRecordStart","onRecordStop","onZoomout","onZoomin","onStartMoveing","onStopMoveing","hideRecord","playHandler","pauseHandler","recordStartHandler","recordStopHandler","moveStartHandler","moveStopHandler","React","className","styles","onClick","e","stopPropagation","style","transform","Pins","pins","viewerWidth","viewerHeight","currentFrameId","pinWidth","pinHeight","renderPin","onPinDoubleClick","onPinClick","getPosition","pin","left","x","toFixed","marginTop","marginLeft","top","y","display","length","filter","frameId","map","index","onDoubleClick","defaultProps","StatusBar","currentImageIndex","DragIcon","AnimatedDiv","Animated","div","TridiUtils","isValidProps","images","format","location","isValid","console","error","normalizedImages","count","Array","apply","_a","toLowerCase","uid","Date","now","toString","Math","random","substr","Tridi","forwardRef","ref","setPins","draggable","hintOnStartup","hintText","autoplay","autoplaySpeed","stopAutoplayOnClick","stopAutoplayOnMouseEnter","resumeAutoplayOnMouseLeave","touch","mousewheel","inverse","dragInterval","touchDragInterval","mouseleaveDetect","showControlBar","showStatusBar","renderHint","zoom","onHintHide","onAutoplayStart","onAutoplayStop","onNextMove","onPrevMove","onNextFrame","onPrevFrame","onDragStart","onDragEnd","onFrameChange","onZoom","maxZoom","minZoom","onLoadChange","useState","moveBuffer","setMoveBuffer","hintVisible","setHintVisible","setCurrentImageIndex","isDragging","setIsDragging","isAutoPlayRunning","setIsAutoPlayRunning","recordingSessionId","setRecordingSessionId","setIsMoveing","AnimatedValues","Value","originZoom","originOffset","isZooming","viewerSize","setViewerSize","_count","isArray","Number","_images","_viewerImageRef","_viewerZoomRef","_draggable","loadedImagesCount","setLoadedImagesCount","hideHint","nextFrame","useCallback","newIndex","prevFrame","rotateViewerImage","interval","touches","eventX","round","clientX","coord","offsetLeft","newMoveBufffer","concat","threshold","oldMove","newMove","resetMoveBuffer","startDragging","stopDragging","toggleAutoplay","state","toggleRecording","existingSessionId","sessionId","resetPosition","log","setValue","toggleMoving","isMoving","setZoom","newZoom","max","min","imageViewerMouseDownHandler","preventDefault","clientY","_value","imageViewerMouseUpHandler","imageViewerMouseMoveHandler","imageViewerMouseLeaveHandler","imageViewerMouseEnterHandler","imageViewerWheelHandler","deltaY","imageViewerTouchStartHandler","imageViewerTouchMoveHandler","imageViewerTouchEndHandler","imageViewerClickHandler","clientWidth","clientHeight","viewerOffsetLeft","getBoundingClientRect","viewerOffsetTop","newPins","pinDoubleClickHandler","item","pinClickHandler","viewerRef","passive","useImperativeHandle","next","prev","loadImage","onImageLoaded","width","_viewerImageRef$curre","height","_viewerImageRef$curre2","renderImages","src","onLoad","alt","renderHintOverlay","onTouchStart","Fragment","generateViewerClassName","classNameStr","initHammer","element","document","getElementById","mc","Hammer","Manager","pinch","Pinch","add","on","ev","center","scale","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","onMouseEnter","translateY","translateX","propTypes","PropTypes","string","object","oneOfType","array","number","bool","func"],"sources":["/home/sajid/Desktop/WorkSpace/carniba/workspace/reactTridi/react-tridi/example/node_modules/react-tridi/src/hooks/useInterval.js","/home/sajid/Desktop/WorkSpace/carniba/workspace/reactTridi/react-tridi/example/node_modules/react-tridi/src/hooks/useTridiKeyPressHandler.js","/home/sajid/Desktop/WorkSpace/carniba/workspace/reactTridi/react-tridi/example/node_modules/react-tridi/src/components/ControlBar/index.js","/home/sajid/Desktop/WorkSpace/carniba/workspace/reactTridi/react-tridi/example/node_modules/react-tridi/src/components/Pins/index.js","/home/sajid/Desktop/WorkSpace/carniba/workspace/reactTridi/react-tridi/example/node_modules/react-tridi/src/components/StatusBar/index.js","/home/sajid/Desktop/WorkSpace/carniba/workspace/reactTridi/react-tridi/example/node_modules/react-tridi/src/index.js"],"sourcesContent":["// https://github.com/johndiiorio/react-useinterval\nimport { useEffect, useRef } from 'react';\n\nexport default function useInterval(callback, delay, ...args) {\n\tconst savedCallback = useRef();\n\n\tuseEffect(() => {\n\t\tsavedCallback.current = callback;\n\t}, [callback]);\n\n\tuseEffect(() => {\n\t\tfunction tick() {\n\t\t\tsavedCallback.current(...args);\n\t\t}\n\t\tif (delay !== null && delay !== undefined) {\n\t\t\tconst id = setInterval(tick, delay);\n\t\t\treturn () => clearInterval(id);\n\t\t}\n\t}, [delay]);\n}\n","import { useEffect, useRef } from 'react';\n\n// Hook\nexport default function useTridiKeyPressHandler({ nextMove, prevMove }) {\n\tconst refPrevMove = useRef();\n\tconst refNextMove = useRef();\n\n\tuseEffect(() => {\n\t\trefPrevMove.current = prevMove;\n\t\trefNextMove.current = nextMove;\n\t}, [nextMove, prevMove]);\n\n\t// If pressed key is our target key then set to true\n\tfunction downHandler({ key }) {\n\t\t// console.log('down', key);\n\t}\n\n\t// If released key is our target key then set to false\n\tconst upHandler = ({ key }) => {\n\t\tconst keyEventConfig = {\n\t\t\tArrowLeft: refPrevMove,\n\t\t\tArrowRight: refNextMove\n\t\t};\n\t\tconst keyEventHandler = keyEventConfig[key];\n\t\tif (keyEventHandler) {\n\t\t\tkeyEventHandler.current();\n\t\t}\n\t};\n\n\t// Add event listeners\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', downHandler);\n\t\twindow.addEventListener('keyup', upHandler);\n\t\t// Remove event listeners on cleanup\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', downHandler);\n\t\t\twindow.removeEventListener('keyup', upHandler);\n\t\t};\n\t}, []); // Empty array ensures that effect is only run on mount and unmount\n}\n","import React from 'react';\nimport styles from './styles.module.css';\n\nimport TargetIcon from '../../assets/icons/target.svg';\nimport StopIcon from '../../assets/icons/stop.svg';\nimport NextIcon from '../../assets/icons/next.svg';\nimport PauseIcon from '../../assets/icons/pause.svg';\nimport PlayIcon from '../../assets/icons/play.svg';\nimport ZoomInIcon from '../../assets/icons/zoomIn.svg';\nimport ZoomOutIcon from '../../assets/icons/zoomOut.svg';\nimport MoveIcon from '../../assets/icons/move.svg';\n\nconst ControlBar = ({\n\tisPlaying,\n\tisRecording,\n\tisMoveing,\n\tsetIsPlaying,\n\tsetIsRecording,\n\tonPlay,\n\tonPause,\n\tonNext,\n\tonPrev,\n\tonRecordStart,\n\tonRecordStop,\n\tonZoomout,\n\tonZoomin,\n\tonStartMoveing,\n\tonStopMoveing,\n\thideRecord\n}) => {\n\tconst playHandler = () => {\n\t\tsetIsPlaying(true);\n\t\tonPlay();\n\t};\n\n\tconst pauseHandler = () => {\n\t\tsetIsPlaying(false);\n\t\tonPause();\n\t};\n\n\tconst recordStartHandler = () => {\n\t\tsetIsRecording(true);\n\t\tonRecordStart();\n\t};\n\n\tconst recordStopHandler = () => {\n\t\tsetIsRecording(false);\n\t\tonRecordStop();\n\t};\n\n\tconst moveStartHandler = () => {\n\t\tonStartMoveing();\n\t};\n\n\tconst moveStopHandler = () => {\n\t\tonStopMoveing();\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`tridi-control-bar ${styles['tridi-control-bar']}`}\n\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t>\n\t\t\t{!hideRecord && !isRecording && (\n\t\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={recordStartHandler}>\n\t\t\t\t\t<TargetIcon />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t\t{!hideRecord && isRecording && (\n\t\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={recordStopHandler}>\n\t\t\t\t\t<StopIcon />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t\t{!isPlaying && (\n\t\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={playHandler}>\n\t\t\t\t\t<PlayIcon />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t\t{isPlaying && (\n\t\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={pauseHandler}>\n\t\t\t\t\t<PauseIcon />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t\t<a\n\t\t\t\tclassName={`${styles['tridi-control-button']}`}\n\t\t\t\tstyle={{ transform: 'rotate(180deg)' }}\n\t\t\t\tonClick={onPrev}\n\t\t\t>\n\t\t\t\t<NextIcon />\n\t\t\t</a>\n\n\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={onNext}>\n\t\t\t\t<NextIcon />\n\t\t\t</a>\n\n\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={onZoomout}>\n\t\t\t\t<ZoomOutIcon />\n\t\t\t</a>\n\n\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={onZoomin}>\n\t\t\t\t<ZoomInIcon />\n\t\t\t</a>\n\n\t\t\t{!isMoveing && (\n\t\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={moveStartHandler}>\n\t\t\t\t\t<MoveIcon />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t\t{isMoveing && (\n\t\t\t\t<a className={`${styles['tridi-control-button']}`} onClick={moveStopHandler}>\n\t\t\t\t\t<StopIcon />\n\t\t\t\t</a>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default ControlBar;\n","import React from 'react';\nimport styles from './styles.module.css';\n\nconst Pins = ({\n\tpins,\n\tviewerWidth,\n\tviewerHeight,\n\tcurrentFrameId,\n\tpinWidth,\n\tpinHeight,\n\trenderPin,\n\tonPinDoubleClick,\n\tonPinClick\n}) => {\n\tconst getPosition = (pin) => {\n\t\tif (viewerWidth >= 0 && viewerHeight >= 0) {\n\t\t\treturn {\n\t\t\t\tleft: (pin.x * 100).toFixed(3) + '%',\n\t\t\t\tmarginTop: `-${pinHeight / 2}px`,\n\t\t\t\tmarginLeft: `-${pinWidth / 2}px`,\n\t\t\t\ttop: (pin.y * 100).toFixed(3) + '%'\n\t\t\t};\n\t\t}\n\t\treturn { display: 'none' };\n\t};\n\treturn (\n\t\t<div className=\"tridi-dots-wrapper\">\n\t\t\t{pins?.length > 0 &&\n\t\t\t\tpins\n\t\t\t\t\t.filter((pin) => pin.frameId === currentFrameId)\n\t\t\t\t\t.map((pin, index) =>\n\t\t\t\t\t\trenderPin ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tclassName={`tridi-pin ${styles['tridi-pin']}`}\n\t\t\t\t\t\t\t\tstyle={getPosition(pin)}\n\t\t\t\t\t\t\t\tonDoubleClick={(e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tonPinDoubleClick(pin);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tonPinClick(pin);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{renderPin(pin)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tclassName={`tridi-dot ${styles['tridi-dot']}`}\n\t\t\t\t\t\t\t\tstyle={getPosition(pin)}\n\t\t\t\t\t\t\t\tonDoubleClick={(e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tonPinDoubleClick(pin);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\tonPinClick(pin);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t</div>\n\t);\n};\n\nPins.defaultProps = {\n\tpins: [],\n\tpinWidth: 10,\n\tpinHeight: 10,\n\tonDoubleClick: () => {},\n\tonPinClick: () => {}\n};\n\nexport default Pins;\n","import React from 'react';\nimport styles from './styles.module.css';\n\nconst StatusBar = ({ isRecording, currentImageIndex }) => (\n\t<div className={`tridi-status-bar ${styles['tridi-status-bar']}`}>\n\t\t<div className=\"status-info\">\n\t\t\t<span className=\"info-label\">Frame Id: </span>\n\t\t\t<span className=\"info-value\">{currentImageIndex}</span>\n\t\t</div>\n\t\t{isRecording && (\n\t\t\t<div className=\"status-info\">\n\t\t\t\t<span className=\"info-label\">Recording...</span>\n\t\t\t</div>\n\t\t)}\n\t</div>\n);\n\nexport default StatusBar;\n","import React, {\n\tuseState,\n\tuseEffect,\n\tuseRef,\n\tforwardRef,\n\tuseImperativeHandle,\n\tuseCallback,\n\tFragment\n} from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.module.css';\nimport DragIcon from './assets/icons/drag.svg';\nimport Animated from 'animated/lib/targets/react-dom';\n\nimport useInterval from './hooks/useInterval';\nimport useTridiKeyPressHandler from './hooks/useTridiKeyPressHandler';\nimport ControlBar from './components/ControlBar';\nimport Pins from './components/Pins';\nimport StatusBar from './components/StatusBar';\nimport Hammer from 'hammerjs';\n\nconst AnimatedDiv = Animated.div;\n\nclass TridiUtils {\n\tstatic isValidProps = ({ images, format, location }) => {\n\t\tlet isValid = true;\n\t\tif (!images && !format) {\n\t\t\tconsole.error(\n\t\t\t\t\"'format' property is missing or invalid. Image format must be provided for 'numbered' property.\"\n\t\t\t);\n\t\t\tisValid = false;\n\t\t}\n\t\tif (images === 'numbered' && !location) {\n\t\t\tconsole.error(\n\t\t\t\t\"'location' property is missing or invalid. Image location must be provided for 'numbered' property.\"\n\t\t\t);\n\t\t\tisValid = false;\n\t\t}\n\t\treturn isValid;\n\t};\n\n\tstatic normalizedImages = (images, format, location, count) => {\n\t\tif (images === 'numbered') {\n\t\t\treturn Array.apply(null, { length: count }).map((_a, index) => {\n\t\t\t\treturn `${location}/${index + 1}.${format.toLowerCase()}`;\n\t\t\t});\n\t\t}\n\t\treturn images;\n\t};\n\n\tstatic uid = () => {\n\t\treturn Date.now().toString(36) + Math.random().toString(36).substr(2);\n\t};\n}\n\nconst Tridi = forwardRef(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tstyle,\n\t\t\timages,\n\t\t\tpins,\n\t\t\tpinWidth,\n\t\t\tpinHeight,\n\t\t\tsetPins,\n\t\t\tformat,\n\t\t\tlocation,\n\t\t\tcount,\n\t\t\tdraggable,\n\t\t\thintOnStartup,\n\t\t\thintText,\n\t\t\tautoplay,\n\t\t\tautoplaySpeed,\n\t\t\tstopAutoplayOnClick,\n\t\t\tstopAutoplayOnMouseEnter,\n\t\t\tresumeAutoplayOnMouseLeave,\n\t\t\ttouch,\n\t\t\tmousewheel,\n\t\t\tinverse,\n\t\t\tdragInterval,\n\t\t\ttouchDragInterval,\n\t\t\tmouseleaveDetect,\n\t\t\tshowControlBar,\n\t\t\tshowStatusBar,\n\t\t\trenderPin,\n\t\t\trenderHint,\n\t\t\tzoom,\n\t\t\tonHintHide,\n\t\t\tonAutoplayStart,\n\t\t\tonAutoplayStop,\n\t\t\tonNextMove,\n\t\t\tonPrevMove,\n\t\t\tonNextFrame,\n\t\t\tonPrevFrame,\n\t\t\tonDragStart,\n\t\t\tonDragEnd,\n\t\t\tonFrameChange,\n\t\t\tonRecordStart,\n\t\t\tonRecordStop,\n\t\t\tonPinClick,\n\t\t\tonZoom,\n\t\t\tmaxZoom,\n\t\t\tminZoom,\n\t\t\thideRecord,\n\t\t\tonLoadChange\n\t\t},\n\t\tref\n\t) => {\n\t\tconst [moveBuffer, setMoveBuffer] = useState([]);\n\t\tconst [hintVisible, setHintVisible] = useState(hintOnStartup);\n\t\tconst [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n\t\tconst [isDragging, setIsDragging] = useState(false);\n\t\tconst [isAutoPlayRunning, setIsAutoPlayRunning] = useState(false);\n\t\tconst [isRecording, setIsRecording] = useState(false);\n\t\tconst [recordingSessionId, setRecordingSessionId] = useState(null);\n\t\tconst [isPlaying, setIsPlaying] = useState(false);\n\t\tconst [isMoveing, setIsMoveing] = useState(false);\n\n\t\tconst AnimatedValues = useRef({\n\t\t\tx: new Animated.Value(0),\n\t\t\ty: new Animated.Value(0),\n\t\t\tzoom: new Animated.Value(zoom),\n\t\t\toriginZoom: 1,\n\t\t\toriginOffset: null,\n\t\t\tisZooming: false\n\t\t});\n\n\t\tconst [viewerSize, setViewerSize] = useState(null);\n\n\t\tconst _count = Array.isArray(images) ? images.length : Number(count);\n\t\tconst _images = TridiUtils.normalizedImages(images, format, location, _count);\n\t\tconst _viewerImageRef = useRef(null);\n\t\tconst _viewerZoomRef = useRef(null);\n\t\tconst _draggable = !isRecording && draggable;\n\t\tconst [loadedImagesCount, setLoadedImagesCount] = useState(0);\n\n\t\tconst hideHint = () => {\n\t\t\tsetHintVisible(false);\n\t\t\tonHintHide();\n\t\t};\n\n\t\tconst nextFrame = useCallback(() => {\n\t\t\tconst newIndex = currentImageIndex >= _count - 1 ? 0 : currentImageIndex + 1;\n\t\t\tsetCurrentImageIndex(newIndex);\n\t\t\tonNextFrame();\n\t\t\tonFrameChange(newIndex);\n\t\t}, [_count, currentImageIndex, onFrameChange, onNextFrame]);\n\n\t\tconst prevFrame = useCallback(() => {\n\t\t\tconst newIndex = currentImageIndex <= 0 ? _count - 1 : currentImageIndex - 1;\n\t\t\tsetCurrentImageIndex(newIndex);\n\t\t\tonPrevFrame();\n\t\t\tonFrameChange(newIndex);\n\t\t}, [_count, currentImageIndex, onFrameChange, onPrevFrame]);\n\n\t\tconst nextMove = useCallback(() => {\n\t\t\tonNextMove();\n\t\t\treturn inverse ? prevFrame() : nextFrame();\n\t\t}, [inverse, nextFrame, onNextMove, prevFrame]);\n\n\t\tconst prevMove = useCallback(() => {\n\t\t\tonPrevMove();\n\t\t\treturn inverse ? nextFrame() : prevFrame();\n\t\t}, [inverse, nextFrame, onPrevMove, prevFrame]);\n\n\t\tconst rotateViewerImage = useCallback(\n\t\t\t(e) => {\n\t\t\t\tconst interval = e.touches ? touchDragInterval : dragInterval;\n\t\t\t\tconst eventX = e.touches ? Math.round(e.touches[0].clientX) : e.clientX;\n\t\t\t\tconst coord = eventX - _viewerImageRef.current.offsetLeft;\n\t\t\t\tlet newMoveBufffer = moveBuffer;\n\t\t\t\tif (moveBuffer.length < 2) {\n\t\t\t\t\tnewMoveBufffer = moveBuffer.concat(coord);\n\t\t\t\t} else {\n\t\t\t\t\tnewMoveBufffer = [moveBuffer[1], coord];\n\t\t\t\t}\n\t\t\t\tsetMoveBuffer(newMoveBufffer);\n\t\t\t\tconst threshold = !(coord % interval);\n\t\t\t\tconst oldMove = newMoveBufffer[0];\n\t\t\t\tconst newMove = newMoveBufffer[1];\n\t\t\t\tif (threshold && newMove < oldMove) {\n\t\t\t\t\tnextMove();\n\t\t\t\t} else if (threshold && newMove > oldMove) {\n\t\t\t\t\tprevMove();\n\t\t\t\t}\n\t\t\t},\n\t\t\t[dragInterval, moveBuffer, nextMove, prevMove, touchDragInterval]\n\t\t);\n\n\t\tconst resetMoveBuffer = () => setMoveBuffer([]);\n\n\t\tconst startDragging = useCallback(() => {\n\t\t\tsetIsDragging(true);\n\t\t\tonDragStart();\n\t\t}, [onDragStart]);\n\n\t\tconst stopDragging = useCallback(() => {\n\t\t\tsetIsDragging(false);\n\t\t\tonDragEnd();\n\t\t}, [onDragEnd]);\n\n\t\tconst toggleAutoplay = useCallback(\n\t\t\t(state) => {\n\t\t\t\tsetIsAutoPlayRunning(state);\n\t\t\t\treturn state ? onAutoplayStart() : onAutoplayStop();\n\t\t\t},\n\t\t\t[onAutoplayStart, onAutoplayStop]\n\t\t);\n\n\t\tconst toggleRecording = useCallback(\n\t\t\t(state, existingSessionId) => {\n\t\t\t\tsetIsRecording(state);\n\t\t\t\tconst sessionId = recordingSessionId || existingSessionId || TridiUtils.uid();\n\t\t\t\tif (state) {\n\t\t\t\t\tif (!recordingSessionId) {\n\t\t\t\t\t\tsetRecordingSessionId(sessionId);\n\t\t\t\t\t}\n\t\t\t\t\tonRecordStart(sessionId);\n\t\t\t\t} else {\n\t\t\t\t\tsetRecordingSessionId(null);\n\t\t\t\t\tonRecordStop(sessionId);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[onRecordStart, onRecordStop, recordingSessionId]\n\t\t);\n\n\t\tconst resetPosition = useCallback(() => {\n\t\t\tconsole.log('resetPosition');\n\t\t\tAnimatedValues.current.x.setValue(0);\n\t\t\tAnimatedValues.current.y.setValue(0);\n\t\t\tAnimatedValues.current.zoom.setValue(zoom);\n\t\t}, []);\n\n\t\tconst toggleMoving = useCallback(\n\t\t\t(isMoving) => {\n\t\t\t\tif (isMoving) {\n\t\t\t\t\ttoggleRecording(false);\n\t\t\t\t\tsetIsMoveing(true);\n\t\t\t\t} else {\n\t\t\t\t\tresetPosition();\n\t\t\t\t\tsetIsMoveing(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[resetPosition, toggleRecording]\n\t\t);\n\n\t\tconst setZoom = (zoom) => {\n\t\t\tlet newZoom = Math.max(minZoom, zoom);\n\t\t\tnewZoom = Math.min(maxZoom, newZoom);\n\t\t\tAnimatedValues.current.zoom.setValue(newZoom);\n\t\t\tonZoom(newZoom);\n\t\t};\n\n\t\t// handlers\n\t\tconst imageViewerMouseDownHandler = (e) => {\n\t\t\tif (_draggable) {\n\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\tstartDragging();\n\t\t\t\trotateViewerImage(e);\n\t\t\t}\n\t\t\tif (isMoveing) {\n\t\t\t\tconst clientX = e.clientX;\n\t\t\t\tconst clientY = e.clientY;\n\t\t\t\tAnimatedValues.current.originOffset = {\n\t\t\t\t\tx: clientX - AnimatedValues.current.x._value,\n\t\t\t\t\ty: clientY - AnimatedValues.current.y._value\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (isAutoPlayRunning && stopAutoplayOnClick) {\n\t\t\t\ttoggleAutoplay(false);\n\t\t\t}\n\t\t};\n\n\t\tconst imageViewerMouseUpHandler = (e) => {\n\t\t\tif (_draggable) {\n\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\tstopDragging();\n\t\t\t\tresetMoveBuffer();\n\t\t\t}\n\t\t\tAnimatedValues.current.originOffset = null;\n\t\t};\n\n\t\tconst imageViewerMouseMoveHandler = (e) => {\n\t\t\tif (isDragging && isMoveing && AnimatedValues.current.originOffset) {\n\t\t\t\tconst clientX = e.clientX;\n\t\t\t\tconst clientY = e.clientY;\n\t\t\t\tAnimatedValues.current.x.setValue(clientX - AnimatedValues.current.originOffset.x);\n\t\t\t\tAnimatedValues.current.y.setValue(clientY - AnimatedValues.current.originOffset.y);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_draggable && isDragging) {\n\t\t\t\trotateViewerImage(e);\n\t\t\t}\n\t\t};\n\n\t\tconst imageViewerMouseLeaveHandler = () => {\n\t\t\tif (_draggable) resetMoveBuffer();\n\t\t\tif (!isAutoPlayRunning && resumeAutoplayOnMouseLeave) {\n\t\t\t\ttoggleAutoplay(true);\n\t\t\t}\n\t\t\tif (mouseleaveDetect) {\n\t\t\t\tstopDragging();\n\t\t\t\tresetMoveBuffer();\n\t\t\t}\n\t\t};\n\n\t\tconst imageViewerMouseEnterHandler = () => {\n\t\t\tif (isAutoPlayRunning && stopAutoplayOnMouseEnter) {\n\t\t\t\ttoggleAutoplay(false);\n\t\t\t}\n\t\t};\n\n\t\tconst imageViewerWheelHandler = useCallback(\n\t\t\t(e) => {\n\t\t\t\tif (mousewheel) {\n\t\t\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\t\t\te.deltaY / 120 > 0 ? nextMove() : prevMove();\n\t\t\t\t}\n\t\t\t},\n\t\t\t[mousewheel, nextMove, prevMove]\n\t\t);\n\n\t\tconst imageViewerTouchStartHandler = useCallback(\n\t\t\t(e) => {\n\t\t\t\tif (isMoveing) {\n\t\t\t\t\tconst clientX = e.touches[0].clientX;\n\t\t\t\t\tconst clientY = e.touches[0].clientY;\n\t\t\t\t\tAnimatedValues.current.originOffset = {\n\t\t\t\t\t\tx: clientX - AnimatedValues.current.x._value,\n\t\t\t\t\t\ty: clientY - AnimatedValues.current.y._value\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (touch) {\n\t\t\t\t\t// if (e.preventDefault) e.preventDefault();\n\t\t\t\t\tstartDragging();\n\t\t\t\t\trotateViewerImage(e);\n\t\t\t\t}\n\n\t\t\t\tif (isAutoPlayRunning && stopAutoplayOnClick) {\n\t\t\t\t\ttoggleAutoplay(false);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[\n\t\t\t\tisAutoPlayRunning,\n\t\t\t\trotateViewerImage,\n\t\t\t\tstartDragging,\n\t\t\t\tstopAutoplayOnClick,\n\t\t\t\ttoggleAutoplay,\n\t\t\t\ttouch,\n\t\t\t\tisMoveing\n\t\t\t]\n\t\t);\n\n\t\tconst imageViewerTouchMoveHandler = useCallback(\n\t\t\t(e) => {\n\t\t\t\tif (AnimatedValues.current.isZooming) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (isMoveing && AnimatedValues.current.originOffset) {\n\t\t\t\t\tconst clientX = e.touches[0].clientX;\n\t\t\t\t\tconst clientY = e.touches[0].clientY;\n\t\t\t\t\tAnimatedValues.current.x.setValue(\n\t\t\t\t\t\tclientX - AnimatedValues.current.originOffset.x\n\t\t\t\t\t);\n\t\t\t\t\tAnimatedValues.current.y.setValue(\n\t\t\t\t\t\tclientY - AnimatedValues.current.originOffset.y\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (touch) {\n\t\t\t\t\t// if (e.preventDefault) e.preventDefault();\n\t\t\t\t\trotateViewerImage(e);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[rotateViewerImage, touch, isMoveing]\n\t\t);\n\n\t\tconst imageViewerTouchEndHandler = useCallback(\n\t\t\t(e) => {\n\t\t\t\tAnimatedValues.current.originOffset = null;\n\t\t\t\tif (touch) {\n\t\t\t\t\tstopDragging();\n\t\t\t\t\tresetMoveBuffer();\n\t\t\t\t}\n\n\t\t\t\tif (!isAutoPlayRunning && resumeAutoplayOnMouseLeave) {\n\t\t\t\t\ttoggleAutoplay(true);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[isAutoPlayRunning, resumeAutoplayOnMouseLeave, stopDragging, toggleAutoplay, touch]\n\t\t);\n\n\t\tconst imageViewerClickHandler = (e) => {\n\t\t\tif (isRecording) {\n\t\t\t\tconst viewerWidth = _viewerImageRef.current.clientWidth;\n\t\t\t\tconst viewerHeight = _viewerImageRef.current.clientHeight;\n\t\t\t\tconst clientX =\n\t\t\t\t\t(e.clientX -\n\t\t\t\t\t\tAnimatedValues.current.x._value -\n\t\t\t\t\t\t(viewerWidth - viewerWidth * AnimatedValues.current.zoom._value) / 2) /\n\t\t\t\t\tAnimatedValues.current.zoom._value;\n\t\t\t\tconst clientY =\n\t\t\t\t\t(e.clientY -\n\t\t\t\t\t\tAnimatedValues.current.y._value -\n\t\t\t\t\t\t(viewerHeight - viewerHeight * AnimatedValues.current.zoom._value) / 2) /\n\t\t\t\t\tAnimatedValues.current.zoom._value;\n\t\t\t\tconst viewerOffsetLeft = _viewerImageRef.current.getBoundingClientRect().left;\n\t\t\t\tconst viewerOffsetTop = _viewerImageRef.current.getBoundingClientRect().top;\n\n\t\t\t\tconst x = ((clientX - viewerOffsetLeft) / viewerWidth).toFixed(6);\n\t\t\t\tconst y = ((clientY - viewerOffsetTop) / viewerHeight).toFixed(6);\n\t\t\t\tconst pin = {\n\t\t\t\t\tid: TridiUtils.uid(),\n\t\t\t\t\tframeId: currentImageIndex,\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t\trecordingSessionId\n\t\t\t\t};\n\t\t\t\tconst newPins = pins.concat(pin);\n\t\t\t\tsetPins(newPins);\n\t\t\t}\n\t\t};\n\n\t\tconst pinDoubleClickHandler = (pin) => {\n\t\t\tif (isRecording) {\n\t\t\t\tconst newPins = pins.filter((item) => item.id !== pin.id);\n\t\t\t\tsetPins(newPins);\n\t\t\t}\n\t\t};\n\n\t\tconst pinClickHandler = (pin) => {\n\t\t\tif (!isRecording) {\n\t\t\t\tonPinClick(pin);\n\t\t\t}\n\t\t};\n\n\t\t// effects\n\t\tuseEffect(() => {\n\t\t\tconst viewerRef = _viewerImageRef.current;\n\t\t\tviewerRef.addEventListener('touchstart', imageViewerTouchStartHandler, {\n\t\t\t\tpassive: false\n\t\t\t});\n\t\t\tviewerRef.addEventListener('touchmove', imageViewerTouchMoveHandler, {\n\t\t\t\tpassive: false\n\t\t\t});\n\t\t\tviewerRef.addEventListener('touchend', imageViewerTouchEndHandler, {\n\t\t\t\tpassive: false\n\t\t\t});\n\t\t\tviewerRef.addEventListener('wheel', imageViewerWheelHandler, {\n\t\t\t\tpassive: false\n\t\t\t});\n\n\t\t\treturn () => {\n\t\t\t\tviewerRef.removeEventListener('touchstart', imageViewerTouchStartHandler);\n\t\t\t\tviewerRef.removeEventListener('touchmove', imageViewerTouchMoveHandler);\n\t\t\t\tviewerRef.removeEventListener('touchend', imageViewerTouchEndHandler);\n\t\t\t\tviewerRef.removeEventListener('wheel', imageViewerWheelHandler);\n\t\t\t};\n\t\t}, [\n\t\t\timageViewerTouchEndHandler,\n\t\t\timageViewerTouchMoveHandler,\n\t\t\timageViewerTouchStartHandler,\n\t\t\timageViewerWheelHandler\n\t\t]);\n\n\t\tuseEffect(() => {\n\t\t\tif (autoplay) {\n\t\t\t\ttoggleAutoplay(autoplay);\n\t\t\t}\n\t\t}, [autoplay, toggleAutoplay]);\n\n\t\tuseInterval(\n\t\t\t() => {\n\t\t\t\tnextMove();\n\t\t\t},\n\t\t\tisAutoPlayRunning ? autoplaySpeed : null\n\t\t);\n\n\t\tuseEffect(() => {\n\t\t\tif (zoom !== undefined && zoom !== AnimatedValues.current.zoom._value) {\n\t\t\t\tlet newZoom = Math.max(minZoom, zoom);\n\t\t\t\tnewZoom = Math.min(maxZoom, newZoom);\n\t\t\t\tAnimatedValues.current.zoom.setValue(newZoom);\n\t\t\t\tonZoom(newZoom);\n\t\t\t}\n\t\t}, [zoom, onZoom]);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\tsetZoom: setZoom,\n\t\t\ttoggleRecording: (state, recordingSessionId) =>\n\t\t\t\ttoggleRecording(state, recordingSessionId),\n\t\t\ttoggleAutoplay: (state) => toggleAutoplay(state),\n\t\t\ttoggleMoving: (isMoving) => toggleMoving(isMoving),\n\t\t\tnext: () => nextMove(),\n\t\t\tprev: () => prevMove()\n\t\t}));\n\n\t\tconst loadImage = () => {\n\t\t\tsetLoadedImagesCount(loadedImagesCount + 1);\n\t\t\tonImageLoaded();\n\t\t\tif (!viewerSize) {\n\t\t\t\tsetViewerSize({\n\t\t\t\t\twidth: _viewerImageRef?.current?.clientWidth,\n\t\t\t\t\theight: _viewerImageRef?.current?.clientHeight\n\t\t\t\t});\n\t\t\t}\n\t\t\t// onLoadChange(loadedImagesCount === _count, Math.round((loadedImagesCount / _count)* 100));\n\t\t};\n\n\t\tconst onImageLoaded = useCallback(() => {\n\t\t\tonLoadChange(\n\t\t\t\tloadedImagesCount + 1 === _count,\n\t\t\t\tMath.round(((loadedImagesCount + 1) / _count) * 100)\n\t\t\t);\n\t\t}, [_count, loadedImagesCount, onLoadChange]);\n\n\t\tuseTridiKeyPressHandler({ nextMove, prevMove });\n\n\t\t// render component helpers\n\t\tconst renderImages = () =>\n\t\t\t_images.map((src, index) => (\n\t\t\t\t<img\n\t\t\t\t\tkey={index}\n\t\t\t\t\tsrc={src}\n\t\t\t\t\tonLoad={loadImage}\n\t\t\t\t\tclassName={`${styles['tridi-viewer-image']} ${\n\t\t\t\t\t\tcurrentImageIndex === index\n\t\t\t\t\t\t\t? styles['tridi-viewer-image-shown']\n\t\t\t\t\t\t\t: styles['tridi-viewer-image-hidden']\n\t\t\t\t\t}`}\n\t\t\t\t\talt=\"\"\n\t\t\t\t/>\n\t\t\t));\n\n\t\tconst renderHintOverlay = () => (\n\t\t\t<div\n\t\t\t\tclassName={`${styles['tridi-hint-overlay']}`}\n\t\t\t\tonClick={hideHint}\n\t\t\t\tonTouchStart={hideHint}\n\t\t\t>\n\t\t\t\t{!renderHint && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<DragIcon />\n\t\t\t\t\t\t{hintText && (\n\t\t\t\t\t\t\t<span className={`${styles['tridi-hint-text']}`}>{hintText}</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t\t{renderHint && renderHint()}\n\t\t\t</div>\n\t\t);\n\n\t\tconst generateViewerClassName = () => {\n\t\t\tlet classNameStr = styles['tridi-viewer'];\n\t\t\tif (_draggable) classNameStr += ' ' + styles['tridi-draggable-true'];\n\t\t\tif (isRecording) classNameStr += ' ' + styles['tridi-recording-true'];\n\t\t\tif (touch) classNameStr += ' ' + styles['tridi-touch-true'];\n\t\t\tif (mousewheel) classNameStr += ' ' + styles['tridi-mousewheel-true'];\n\t\t\tif (hintOnStartup) classNameStr += ' ' + styles['tridi-hintOnStartup-true'];\n\t\t\tif (className) classNameStr += ' ' + className;\n\t\t\treturn classNameStr;\n\t\t};\n\n\t\tconst initHammer = useCallback(() => {\n\t\t\tconst element = document.getElementById('viewerImage');\n\t\t\tconst mc = new Hammer.Manager(element);\n\t\t\tconst pinch = new Hammer.Pinch();\n\t\t\tmc.add([pinch]);\n\t\t\tmc.on('pinchstart', (ev) => {\n\t\t\t\tAnimatedValues.current.originOffset = {\n\t\t\t\t\tx: ev.center.x - AnimatedValues.current.x._value,\n\t\t\t\t\ty: ev.center.y - AnimatedValues.current.y._value\n\t\t\t\t};\n\t\t\t\tAnimatedValues.current.originZoom = AnimatedValues.current.zoom._value;\n\t\t\t\tAnimatedValues.current.isZooming = true;\n\t\t\t});\n\t\t\tmc.on('pinchend', (ev) => {\n\t\t\t\tAnimatedValues.current.isZooming = false;\n\t\t\t\tAnimatedValues.current.originOffset = null;\n\t\t\t});\n\t\t\tmc.on('pinchcancel', (ev) => {\n\t\t\t\tAnimatedValues.current.isZooming = false;\n\t\t\t\tAnimatedValues.current.originOffset = null;\n\t\t\t});\n\n\t\t\tmc.on('pinch', function (ev) {\n\t\t\t\tlet scale = AnimatedValues.current.originZoom - 1 + ev.scale;\n\t\t\t\tscale = Math.max(minZoom, scale);\n\t\t\t\tscale = Math.min(maxZoom, scale);\n\n\t\t\t\t/* const offset = {\n\t\t\t\t\tx: (ev.center.x - AnimatedValues.current.originOffset.x) / scale,\n\t\t\t\t\ty: (ev.center.y - AnimatedValues.current.originOffset.y) / scale\n\t\t\t\t};\n\t\t\t\tif (offset.x !== AnimatedValues.current.x._value) {\n\t\t\t\t\tAnimatedValues.current.x.setValue(offset.x);\n\t\t\t\t}\n\t\t\t\tif (offset.y !== AnimatedValues.current.y._value) {\n\t\t\t\t\tAnimatedValues.current.y.setValue(offset.y);\n\t\t\t\t} */\n\n\t\t\t\tif (scale !== AnimatedValues.current.zoom._value) {\n\t\t\t\t\tAnimatedValues.current.zoom.setValue(scale);\n\t\t\t\t\tonZoom(scale);\n\t\t\t\t}\n\t\t\t});\n\t\t}, [minZoom, maxZoom]);\n\n\t\tuseEffect(() => {\n\t\t\tinitHammer();\n\t\t}, []);\n\n\t\tif (!TridiUtils.isValidProps({ images, format, location })) {\n\t\t\tconsole.log('Invalid Settings');\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<div className={generateViewerClassName()}>\n\t\t\t\t{hintVisible && renderHintOverlay()}\n\t\t\t\t<div\n\t\t\t\t\tid=\"viewerImage\"\n\t\t\t\t\tref={_viewerImageRef}\n\t\t\t\t\tonMouseDown={imageViewerMouseDownHandler}\n\t\t\t\t\tonMouseUp={imageViewerMouseUpHandler}\n\t\t\t\t\tonMouseMove={imageViewerMouseMoveHandler}\n\t\t\t\t\tonMouseLeave={imageViewerMouseLeaveHandler}\n\t\t\t\t\tonMouseEnter={imageViewerMouseEnterHandler}\n\t\t\t\t\tonClick={imageViewerClickHandler}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<AnimatedDiv\n\t\t\t\t\t\tref={_viewerZoomRef}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: [\n\t\t\t\t\t\t\t\t{ scale: AnimatedValues.current.zoom },\n\t\t\t\t\t\t\t\t{ translateY: AnimatedValues.current.y },\n\t\t\t\t\t\t\t\t{ translateX: AnimatedValues.current.x }\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{_images?.length > 0 && renderImages()}\n\t\t\t\t\t\t{viewerSize ? (\n\t\t\t\t\t\t\t<Pins\n\t\t\t\t\t\t\t\tpins={pins}\n\t\t\t\t\t\t\t\tviewerWidth={viewerSize.width}\n\t\t\t\t\t\t\t\tviewerHeight={viewerSize.height}\n\t\t\t\t\t\t\t\tcurrentFrameId={currentImageIndex}\n\t\t\t\t\t\t\t\tpinWidth={pinWidth}\n\t\t\t\t\t\t\t\tpinHeight={pinHeight}\n\t\t\t\t\t\t\t\tonPinDoubleClick={pinDoubleClickHandler}\n\t\t\t\t\t\t\t\tonPinClick={pinClickHandler}\n\t\t\t\t\t\t\t\trenderPin={renderPin}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</AnimatedDiv>\n\t\t\t\t</div>\n\n\t\t\t\t{showStatusBar && (\n\t\t\t\t\t<StatusBar isRecording={isRecording} currentImageIndex={currentImageIndex} />\n\t\t\t\t)}\n\t\t\t\t{showControlBar && (\n\t\t\t\t\t<ControlBar\n\t\t\t\t\t\thideRecord={hideRecord}\n\t\t\t\t\t\tisPlaying={isPlaying}\n\t\t\t\t\t\tisRecording={isRecording}\n\t\t\t\t\t\tisMoveing={isMoveing}\n\t\t\t\t\t\tsetIsPlaying={setIsPlaying}\n\t\t\t\t\t\tsetIsRecording={setIsRecording}\n\t\t\t\t\t\tsetIsMoveing={setIsMoveing}\n\t\t\t\t\t\tonStartMoveing={() => toggleMoving(true)}\n\t\t\t\t\t\tonStopMoveing={() => toggleMoving(false)}\n\t\t\t\t\t\tonPlay={() => toggleAutoplay(true)}\n\t\t\t\t\t\tonPause={() => toggleAutoplay(false)}\n\t\t\t\t\t\tonNext={() => nextMove()}\n\t\t\t\t\t\tonPrev={() => prevMove()}\n\t\t\t\t\t\tonRecordStart={() => {\n\t\t\t\t\t\t\ttoggleRecording(true);\n\t\t\t\t\t\t\tsetIsMoveing(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonRecordStop={() => toggleRecording(false)}\n\t\t\t\t\t\tonZoomout={() => {\n\t\t\t\t\t\t\tsetZoom(AnimatedValues.current.zoom._value - 0.1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonZoomin={() => {\n\t\t\t\t\t\t\tsetZoom(AnimatedValues.current.zoom._value + 0.1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nTridi.propTypes = {\n\tclassName: PropTypes.string,\n\tstyle: PropTypes.object,\n\timages: PropTypes.oneOfType([PropTypes.array, PropTypes.string]),\n\tpins: PropTypes.array,\n\tpinWidth: PropTypes.number,\n\tpinHeight: PropTypes.number,\n\tformat: PropTypes.string,\n\tlocation: PropTypes.string,\n\tcount: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\tdraggable: PropTypes.bool,\n\thintOnStartup: PropTypes.bool,\n\thintText: PropTypes.string,\n\tautoplay: PropTypes.bool,\n\tautoplaySpeed: PropTypes.number,\n\tstopAutoplayOnClick: PropTypes.bool,\n\tstopAutoplayOnMouseEnter: PropTypes.bool,\n\tresumeAutoplayOnMouseLeave: PropTypes.bool,\n\ttouch: PropTypes.bool,\n\tmousewheel: PropTypes.bool,\n\tinverse: PropTypes.bool,\n\tdragInterval: PropTypes.number,\n\ttouchDragInterval: PropTypes.number,\n\tmouseleaveDetect: PropTypes.bool,\n\tshowControlBar: PropTypes.bool,\n\tshowStatusBar: PropTypes.bool,\n\thideRecord: PropTypes.bool,\n\n\trenderPin: PropTypes.func,\n\tsetPins: PropTypes.func,\n\trenderHint: PropTypes.func,\n\tzoom: PropTypes.number,\n\tmaxZoom: PropTypes.number,\n\tminZoom: PropTypes.number,\n\n\tonHintHide: PropTypes.func,\n\tonAutoplayStart: PropTypes.func,\n\tonAutoplayStop: PropTypes.func,\n\tonNextMove: PropTypes.func,\n\tonPrevMove: PropTypes.func,\n\tonNextFrame: PropTypes.func,\n\tonPrevFrame: PropTypes.func,\n\tonDragStart: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonFrameChange: PropTypes.func,\n\tonRecordStart: PropTypes.func,\n\tonRecordStop: PropTypes.func,\n\tonPinClick: PropTypes.func,\n\tonLoadChange: PropTypes.func\n};\n\nTridi.defaultProps = {\n\tclassName: undefined,\n\tstyle: undefined,\n\timages: 'numbered',\n\tpin: undefined,\n\tpinWidth: 10,\n\tpinHeight: 10,\n\tformat: undefined,\n\tlocation: './images',\n\tcount: undefined,\n\tdraggable: true,\n\thintOnStartup: false,\n\thintText: null,\n\tautoplay: false,\n\tautoplaySpeed: 50,\n\tstopAutoplayOnClick: false,\n\tstopAutoplayOnMouseEnter: false,\n\tresumeAutoplayOnMouseLeave: false,\n\ttouch: true,\n\tmousewheel: false,\n\tinverse: false,\n\tdragInterval: 1,\n\ttouchDragInterval: 2,\n\tmouseleaveDetect: false,\n\tshowControlBar: false,\n\tshowStatusBar: false,\n\thideRecord: false,\n\n\trenderPin: undefined,\n\tsetPins: () => {},\n\trenderHint: undefined,\n\tzoom: 1,\n\tmaxZoom: 3,\n\tminZoom: 1,\n\tonHintHide: () => {},\n\tonAutoplayStart: () => {},\n\tonAutoplayStop: () => {},\n\tonNextMove: () => {},\n\tonPrevMove: () => {},\n\tonNextFrame: () => {},\n\tonPrevFrame: () => {},\n\tonDragStart: () => {},\n\tonDragEnd: () => {},\n\tonFrameChange: () => {},\n\tonRecordStart: () => {},\n\tonRecordStop: () => {},\n\tonPinClick: () => {},\n\tonZoom: () => {},\n\tonLoadChange: () => {}\n};\n\nexport default Tridi;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}